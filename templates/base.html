<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VPL 2026 | Vallalar Premier League</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">    
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --vpl-blue: #00a6fb;
            --navy-dark: #001d2e;
            --navy-light: #003554;
        }

        /* Prevent horizontal scroll */
        html, body {
            overflow-x: hidden;
            width: 100%;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            /* Nav (80px) + Marquee (35px) = 115px + extra padding */
            padding-top: 125px; 
            background: #f4f7f6;
            box-sizing: border-box;
        }

        *, *:before, *:after { box-sizing: inherit; }

        /* --- NAVIGATION BAR --- */
        nav {
            background: linear-gradient(135deg, var(--navy-dark) 0%, var(--navy-light) 100%);
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1001;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border-bottom: 3px solid var(--vpl-blue);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            text-decoration: none;
            gap: 15px;
        }

        .nav-logo {
            height: 70px; 
            width: auto;
            filter: drop-shadow(0 0 8px rgba(0, 166, 251, 0.6));
        }

        .main-title {
            font-family: 'Oswald', sans-serif;
            color: #ffffff;
            font-size: 1.4rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .nav-links a {
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            padding: 8px 10px;
            transition: 0.3s;
            border-radius: 6px;
        }

        .nav-links a:hover {
            background: rgba(255,255,255,0.1);
            color: #fff;
        }

        /* --- ONLINE USER BADGE --- */
        .online-badge {
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 12px;
            border-radius: 20px;
            color: #00ff88;
            font-size: 0.85rem;
            font-weight: 700;
            margin: 0 10px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            white-space: nowrap;
        }

        .online-dot {
            height: 8px; width: 8px;
            background-color: #00ff88;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
            box-shadow: 0 0 5px #00ff88;
            animation: pulse-green 2s infinite;
        }

        @keyframes pulse-green {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 6px rgba(0, 255, 136, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(0, 255, 136, 0); }
        }

        .btn-login {
            background: var(--vpl-blue) !important;
            color: white !important;
            padding: 8px 18px !important;
            margin-left: 10px;
        }

        .btn-logout {
            background: #ef4444 !important;
            color: white !important;
            margin-left: 10px;
        }
	.nav-brand {
        display: flex;
        align-items: center;
        text-decoration: none;
        gap: 12px;
    }

    /* LOGO STYLING */
    .nav-logo {
        height: 65px; /* Adjust height to fit navbar */
        width: auto;
        filter: drop-shadow(0 0 5px rgba(0, 166, 251, 0.5)); /* Adds a glow effect */
        transition: transform 0.3s ease;
    }

    .nav-logo:hover {
        transform: scale(1.05); /* Slight zoom on hover */
    }

    .brand-text {
        font-family: 'Oswald', sans-serif;
        color: white;
        font-size: 1.5rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        display: flex;
        flex-direction: column;
        line-height: 1;
    }

    .brand-text span { font-size: 0.8rem; color: #00a6fb; font-weight: 400; letter-spacing: 2px; }
        /* --- MARQUEE STYLES --- */
        .marquee-container {
            background: #001d2e;
            color: #ffffff;
            height: 35px;
            display: flex;
            align-items: center;
            overflow: hidden;
            position: fixed;
            top: 80px;
            width: 100%;
            z-index: 1000;
            font-weight: 700;
            font-size: 0.85rem;
            border-top: 1px solid #00a6fb;
        }

        .marquee-text {
            white-space: nowrap;
            display: inline-block;
            padding-left: 100%;
            animation: scroll-text 35s linear infinite;
        }

        @keyframes scroll-text {
            0%   { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }

		/* --- PROFESSIONAL TOAST NOTIFICATIONS --- */
		.flash-container {
			position: fixed;
			top: 30px;
			left: 50%;
			transform: translateX(-50%);
			z-index: 9999;
			width: 90%;
			max-width: 600px;
			display: flex;
			flex-direction: column;
			gap: 10px;
		}

		.modern-alert {
			background: white;
			padding: 16px 20px;
			border-radius: 12px;
			box-shadow: 0 10px 30px rgba(0,0,0,0.15);
			display: flex;
			align-items: center;
			justify-content: space-between;
			border-left: 6px solid #ccc; /* Default Border */
			font-family: 'Segoe UI', sans-serif;
			animation: slideDown 0.4s ease-out forwards;
			opacity: 0;
		}

		/* Specific Colors for Categories */
		.alert-info { 
			border-left-color: #0284c7; /* Professional Blue */
		}
		.alert-info i { color: #0284c7; }

		.alert-success { 
			border-left-color: #10b981; /* Success Green */
		}
		.alert-success i { color: #10b981; }

		.alert-warning { 
			border-left-color: #f59e0b; /* Attention Orange */
		}
		.alert-warning i { color: #f59e0b; }

		.alert-danger { 
			border-left-color: #ef4444; /* Error Red */
		}
		.alert-danger i { color: #ef4444; }

		.alert-content {
			display: flex;
			align-items: center;
			gap: 15px;
			font-size: 1rem;
			font-weight: 600;
			color: #334155;
		}

		.close-toast {
			background: none;
			border: none;
			font-size: 1.5rem;
			color: #94a3b8;
			cursor: pointer;
			line-height: 1;
		}
		.close-toast:hover { color: #333; }

		/* --- MEGA CELEBRATION OVERLAY --- */
		.celebration-overlay {
			position: fixed;
			top: 0; left: 0;
			width: 100%; height: 100%;
			background: rgba(0, 0, 0, 0.85); /* Dark background */
			z-index: 10000;
			display: flex;
			align-items: center;
			justify-content: center;
			animation: fadeIn 0.3s ease-out;
		}

		.celebration-card {
			background: white;
			padding: 50px 80px;
			border-radius: 20px;
			text-align: center;
			border: 5px solid #ffb703; /* Gold Border */
			box-shadow: 0 0 50px rgba(255, 183, 3, 0.5);
			animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
			max-width: 600px;
		}

		.celebration-icon {
			font-size: 5rem;
			color: #22c55e; /* Green */
			margin-bottom: 20px;
			display: block;
			animation: bounce 1s infinite;
		}

		.celebration-title {
			font-size: 3rem;
			font-weight: 900;
			color: #003554;
			margin: 0;
			text-transform: uppercase;
			font-family: 'Segoe UI', sans-serif;
			letter-spacing: 2px;
		}

		.celebration-message {
			font-size: 1.5rem;
			color: #475569;
			margin-top: 15px;
			font-weight: 600;
		}

		/* Animations */
		@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
		@keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
		@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }


		/* Animation */
		@keyframes slideDown {
			from { transform: translateY(-20px); opacity: 0; }
			to { transform: translateY(0); opacity: 1; }
		}
        @media (max-width: 768px) {
            nav { height: 70px; padding: 0 10px; }
            .nav-logo { height: 50px; } 
            .main-title { display: none; } 
            .nav-links a { font-size: 0.8rem; padding: 5px; }
            body { padding-top: 115px; }
            .marquee-container { top: 70px; }
            .online-badge { display: none; } 
        }
    </style>
</head>
<body>

<nav>
    <a href="{{ url_for('home') }}" class="nav-brand">
        <img src="{{ url_for('static', filename='images/image_3.png') }}" alt="VPL Logo" class="nav-logo">
        <div class="brand-title-box">
            <span class="main-title">Vallalar Premier League</span>
        </div>
    </a>

    <div class="nav-links">
        <span class="online-badge" title="Users currently active">
            <span class="online-dot"></span> {{ online_count|default(0) }} Online
        </span>
		<a href="{{ url_for('home', view='home') }}">Home</a>
        <a href="{{ url_for('teams') }}">Teams</a>
        <a href="{{ url_for('stats') }}">Stats</a>
        
        <a href="{{ url_for('auction') }}">
            <i class="fa fa-gavel" style="color: #ffcc00;"></i> Auction
        </a>
        
        <a href="{{ url_for('gallery') }}">Gallery</a>

        {% if current_user.is_authenticated %}
            
            {% if current_user.role in ['admin', 'super_admin'] %}
                <a href="{{ url_for('players') }}">Players</a>
                <a href="{{ url_for('admin_dashboard') }}" style="color: #ffcc00; border: 1px solid #ffcc00;">
                    <i class="fa fa-tachometer-alt"></i> Dashboard
                </a>
            {% endif %}
            
            <a href="{{ url_for('logout') }}" class="btn-logout">Logout</a>

        {% else %}
            <a href="{{ url_for('register') }}">Register</a>
            <a href="{{ url_for('login') }}" class="btn-login">Login</a>
        {% endif %}
    </div>
</nav>
    
<div class="marquee-container">
    <div class="marquee-text">
        NOTICE: PLAYER SELECTION PROCESS WILL BE BROADCASTED ON DIGITAL PLATFORMS. &nbsp;&nbsp;&nbsp;&nbsp; | &nbsp;&nbsp;&nbsp;&nbsp;
        UNIQUE TEAM JERSEY WILL BE PROVIDED FOR SELECTED PLAYERS. &nbsp;&nbsp;&nbsp;&nbsp; | &nbsp;&nbsp;&nbsp;&nbsp;
        REGISTRATION DEADLINE: JANUARY 24, 2026.
    </div>
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            
            {% if 'MEGA BID' in message %}
                <div class="celebration-overlay" id="celeb-box" onclick="this.remove()">
                    <div class="jackpot-card"> <i class="fa fa-star" style="font-size:6rem; color:#ffd60a; margin-bottom:20px; animation:spin 2s infinite;"></i>
                        <h1 class="celebration-title">MEGA BID!</h1>
                        <p class="celebration-message">{{ message | replace('MEGA BID!', '') }}</p>
                    </div>
                </div>
                <script>setTimeout(() => { document.getElementById('celeb-box').remove(); }, 6000);</script>

            {% elif 'Congrats' in message %}
                <div class="celebration-overlay" id="celeb-box" onclick="this.remove()">
                    <div class="celebration-card">
                        <i class="fa fa-check-circle" style="font-size:5rem; color:#10b981; margin-bottom:15px;"></i>
                        <h1 style="font-size:2.5rem; margin:0; color:#003554;">SOLD!</h1>
                        <p style="font-size:1.5rem; margin-top:10px;">{{ message }}</p>
                    </div>
                </div>
                <script>setTimeout(() => { document.getElementById('celeb-box').remove(); }, 4000);</script>

            {% else %}
                <div class="flash-container">
                    <div class="modern-alert alert-{{ category }}">
                        <div class="alert-content">
                            {% if category == 'danger' %}<i class="fa fa-times-circle fa-lg"></i>
                            {% elif category == 'warning' %}<i class="fa fa-bell fa-lg"></i>
                            {% else %}<i class="fa fa-info-circle fa-lg"></i>{% endif %}
                            <span>{{ message }}</span>
                        </div>
                        <button class="close-toast" onclick="this.parentElement.remove()">&times;</button>
                    </div>
                </div>
            {% endif %}

        {% endfor %}
    {% endif %}
{% endwith %}

<script>
    // Automatically hide alerts after 4 seconds
    setTimeout(function() {
        const alerts = document.querySelectorAll('.modern-alert');
        alerts.forEach(alert => {
            alert.style.opacity = '0';
            alert.style.transition = 'opacity 0.5s ease';
            setTimeout(() => alert.remove(), 500); // Remove from DOM after fade
        });
    }, 4000); // 4000ms = 4 seconds
</script>

{% block content %}{% endblock %}

</body>
</html>