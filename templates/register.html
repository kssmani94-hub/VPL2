{% extends "base.html" %}
{% block content %}
<style>
    /* Registration Page Specific Styles */
    .reg-container {
        max-width: 900px;
        margin: 40px auto;
        background: #ffffff;
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .reg-header {
        background: #003554;
        color: white;
        padding: 30px;
        text-align: center;
        border-bottom: 5px solid #00a6fb;
    }

    .deadline-notice {
        background: #fff5f5;
        border-bottom: 2px solid #feb2b2;
        padding: 15px;
        text-align: center;
        color: #c53030;
        font-weight: 800;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .reg-form {
        padding: 40px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    /* Fix 1: Bold Borders for Visibility */
    .reg-form input, .reg-form select {
        padding: 12px;
        border: 2px solid #94a3b8; /* Bolder 2px border */
        border-radius: 8px;
        font-size: 1rem;
        transition: 0.3s;
        box-sizing: border-box;
        width: 100%;
        background: #ffffff;
    }

    .reg-form input:focus {
        border-color: #00a6fb;
        outline: none;
        background: #f8fbff;
        box-shadow: 0 0 5px rgba(0, 166, 251, 0.3);
    }

    .form-group { display: flex; flex-direction: column; }
    .full-width { grid-column: span 2; }

    .section-title {
        grid-column: span 2;
        color: #00a6fb;
        border-bottom: 2px solid #f1f5f9;
        padding-bottom: 10px;
        margin: 25px 0 10px;
        font-family: 'Oswald';
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    /* Fix 2 & 3: Kit Box and Sleeve Alignment */
    .kit-box {
        grid-column: span 2;
        background: #f8fbff;
        padding: 25px;
        border-radius: 12px;
        display: grid;
        grid-template-columns: repeat(2, 1fr); 
        gap: 20px;
        border: 1px solid #e2e8f0;
    }

    .sleeves-container {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-top: 5px;
        padding: 5px 0;
    }

    .sleeve-option {
        display: flex;
        align-items: center;
        gap: 5px;
        font-weight: 700;
        font-size: 0.85rem;
        cursor: pointer;
    }

    .sleeve-option input { width: auto !important; height: auto !important; margin: 0; }

    .verify-box {
        grid-column: span 2;
        background: #fff9db;
        padding: 15px;
        border: 1px solid #fab005;
        border-radius: 8px;
        margin-top: 10px;
        display: flex;
        align-items: flex-start;
        gap: 10px;
    }

    .btn-submit {
        grid-column: span 2;
        background: #00a6fb;
        color: white;
        border: none;
        padding: 20px;
        border-radius: 50px;
        font-size: 1.1rem;
        font-weight: 800;
        text-transform: uppercase;
        cursor: pointer;
        transition: 0.3s;
        margin-top: 20px;
        box-shadow: 0 10px 20px rgba(0, 166, 251, 0.3);
    }

    .btn-submit:disabled { background: #cbd5e1; cursor: not-allowed; box-shadow: none; }

    /* MOBILE ADJUSTMENTS - FIXED FOR 2026 */
    @media (max-width: 768px) {
        .reg-container { margin: 15px; border-radius: 10px; }
        .reg-form { 
            padding: 20px; 
            grid-template-columns: 1fr; /* Force 1 column for everything */
        }
        .full-width, .section-title, .kit-box, .btn-submit, .verify-box { 
            grid-column: span 1; 
        }
        
        .kit-box { 
            grid-template-columns: 1fr; /* Force 1 column inside kit box */
            gap: 15px;
            padding: 15px;
        }

        .section-title {
            font-size: 1.1rem;
        }

        .reg-header h1 {
            font-size: 1.6rem !important;
        }

        .sleeves-container {
            justify-content: flex-start;
            gap: 15px;
        }
    }
</style>

<div class="reg-container">
    <div class="reg-header">
        <h1 style="font-family: 'Oswald'; margin: 0; text-transform: uppercase;">Register your slot</h1>
        <p style="margin: 5px 0 0; opacity: 0.8; letter-spacing: 1px;">Season 2 | Official Registration</p>
    </div>

    <div class="deadline-notice">
        ⚠️ Registration Closes on 24th January 2026
    </div>

    <form action="{{ url_for('register') }}" method="POST" enctype="multipart/form-data" class="reg-form" id="vplForm">
        
        <h3 class="section-title">1. Personal Details</h3>
        
        <div class="form-group full-width">
            <label>Full Name *</label>
            <input type="text" name="full_name" placeholder="Enter Full Name" required>
        </div>

        <div class="form-group">
            <label>Age *</label>
            <input type="number" name="age" placeholder="Enter your age" required>
        </div>

        <div class="form-group">
            <label>Mobile Number (WhatsApp) *</label>
            <input type="tel" id="primary_phone" name="phone" pattern="[0-9]{10}" placeholder="10-digit Mobile No" required oninput="syncCricNumber()">
        </div>

        <div class="form-group full-width">
            <label>Level of Cricket *</label>
            <select name="level" required>
                <option value="" disabled selected>Select Level</option>
                <option value="Local/Club Level">Club Level</option>
                <option value="District/State Level">District/State Level</option>
            </select>
        </div>

        <h3 class="section-title">2. CricHeroes Profile</h3>

        <div class="form-group">
            <label>Same as Primary No?</label>
            <div style="padding:10px 0;">
                <input type="radio" name="ch_reg" value="Yes" id="ch_yes" onclick="toggleCricNumber()" style="width:auto;"> Yes
                <input type="radio" name="ch_reg" value="No" id="ch_no" onclick="toggleCricNumber()" style="width:auto; margin-left:20px;" checked> No
            </div>
        </div>

        <div class="form-group">
            <label>CricHeroes Mobile No. *</label>
            <input type="tel" name="ch_mobile" id="ch_mobile_field" pattern="[0-9]{10}" placeholder="App registered mobile" required>
        </div>

        <div class="form-group full-width">
            <label>Exact Name on CricHeroes *</label>
            <input type="text" name="ch_name" placeholder="Profile name on app" required>
        </div>

        <h3 class="section-title">3. Cricketing Details</h3>

        <div class="form-group">
            <label>Current Team *</label>
            <input type="text" name="current_team" placeholder="Your regular team" required>
        </div>

        <div class="form-group">
            <label>Previous VPL Team (Optional)</label>
            <input type="text" name="prev_team" placeholder="Season 1 Team Name">
        </div>

        <div class="form-group">
            <label>Player Role *</label>
            <select name="role" required>
                <option value="" disabled selected>Select Role</option>
                <option value="Batsman">Batsman</option>
                <option value="Bowler">Bowler</option>
                <option value="All-Rounder">All-Rounder</option>
                <option value="Wicket-Keeper">Wicket-Keeper</option>
            </select>
        </div>

        <div class="form-group">
            <label>Playing Style</label>
            <input type="text" name="style" placeholder="e.g. RHB / Leg Spinner">
        </div>

        <h3 class="section-title">4. Jersey Customization</h3>

        <div class="kit-box">
            <div class="form-group">
                <label>Jersey Name *</label>
                <input type="text" name="shirt_name" placeholder="Name on Back" required>
            </div>
            
            <div class="form-group">
                <label>Jersey No. *</label>
                <input type="number" name="shirt_number" placeholder="Jersey No" required>
            </div>
            
            <div class="form-group">
                <label>Size *</label>
                <select name="shirt_size" required>
                    <option value="S-36">S-36</option>
                    <option value="M-38">M-38</option>
                    <option value="L-40">L-40</option>
                    <option value="XL-42">XL-42</option>
                    <option value="XXL-44">XXL-44</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Sleeves *</label>
                <div class="sleeves-container">
                    <label class="sleeve-option">
                        <input type="radio" name="sleeves" value="Half" checked> Half
                    </label>
                    <label class="sleeve-option">
                        <input type="radio" name="sleeves" value="Full"> Full <span style="color: #27ae60;">(+₹50)</span>
                    </label>
                </div>
            </div>
        </div>

        <h3 class="section-title">5. Photo & Verification</h3>

        <div class="form-group full-width">
            <label>Profile Photo (Max 20MB) *</label>
            <input type="file" name="photo" id="photoInput" required accept="image/*" onchange="validateFileSize()">
            <p id="sizeError" style="color: #ef4444; font-size: 0.8rem; margin-top: 8px; display: none; font-weight: 700;">
                <i class="fa fa-exclamation-triangle"></i> File size exceeds 20MB. Please upload a smaller photo.
            </p>
            <small style="margin-top:5px; color:#64748b;">Clear face photo required for the auction profile.</small>
        </div>

        <div class="verify-box">
            <input type="checkbox" id="verifyCheck" onchange="toggleSubmitButton()" required style="width: 20px; height: 20px; cursor: pointer;">
            <label for="verifyCheck" style="cursor: pointer; color: #856404; font-weight: 600;">I verify that all details provided are correct and final. *</label>
        </div>

        <button type="submit" id="submitBtn" class="btn-submit" disabled>Submit Registration <i class="fa fa-arrow-right" style="margin-left:10px;"></i></button>
    </form>
</div>

<script>
    function toggleSubmitButton() {
        const checkbox = document.getElementById("verifyCheck");
        const btn = document.getElementById("submitBtn");
        btn.disabled = !checkbox.checked;
    }

    function toggleCricNumber() {
        var yesRadio = document.getElementById("ch_yes");
        var primaryPhone = document.getElementById("primary_phone");
        var mobileField = document.getElementById("ch_mobile_field");
        if (yesRadio.checked) {
            mobileField.value = primaryPhone.value;
            mobileField.readOnly = true;
            mobileField.style.background = "#f1f5f9";
        } else {
            mobileField.value = "";
            mobileField.readOnly = false;
            mobileField.style.background = "#ffffff";
        }
    }

    function syncCricNumber() {
        var yesRadio = document.getElementById("ch_yes");
        var primaryPhone = document.getElementById("primary_phone");
        var mobileField = document.getElementById("ch_mobile_field");
        if (yesRadio.checked) { mobileField.value = primaryPhone.value; }
    }

    function validateFileSize() {
        const fileInput = document.getElementById('photoInput');
        const errorMsg = document.getElementById('sizeError');
        const submitBtn = document.getElementById('submitBtn');
        const maxSize = 20 * 1024 * 1024; // 20MB

        if (fileInput.files.length > 0) {
            const fileSize = fileInput.files[0].size;
            if (fileSize > maxSize) {
                errorMsg.style.display = 'block';
                fileInput.value = ''; 
                submitBtn.disabled = true;
            } else {
                errorMsg.style.display = 'none';
            }
        }
    }
</script>
{% endblock %}